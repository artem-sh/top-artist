<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:sh="http://sh.app/top-artist">

<h:head>
  <title>Artist comparison</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="/js/highcharts.js" type="text/javascript"></script>
  <script type="text/javascript">
    var chart1; // globally available
    $(document).ready(function () {
      chart1 = new Highcharts.Chart({
        chart: {
          renderTo: 'container',
          type: 'bar'
        },
        title: {
          text: 'vk.com'
        },
        xAxis: {
          categories: ['vk.com'],
          labels: {enabled: false}
        },
        yAxis: {
          title: {
            text: 'Tracks'
          }
        },
        series: [
          {
            name: 'Jane',
            data: [1]
          },
          {
            name: 'John',
            data: [5]
          }
        ]
      });
    });
  </script>
  <script type="text/javascript">
    var chart2; // globally available
    $(document).ready(function () {
      chart2 = new Highcharts.Chart({
        chart: {
          renderTo: 'container2',
          type: 'bar'
        },
        title: {
          text: 'Artist comparison'
        },
        xAxis: {
          categories: ['last.fm']
        },
        yAxis: {
          title: {
            text: 'Fruit eaten'
          }
        },
        series: [
          {
            name: 'Jane',
            data: [1]
          },
          {
            name: 'John',
            data: [5]
          }
        ]
      });
    });
  </script>
</h:head>
<h:body>
  <h:panelGrid id="uiCharts">
    <c:forEach items="#{charts.charts}" var="chart">
      <sh:chart chart="#{chart}"/>
    </c:forEach>
  </h:panelGrid>


  <div id="container" style="width: 100%; height: 200px"></div>
  <div id="container2" style="width: 100%; height: 200px"></div>

  <h:commandButton value="Submit">
    <f:ajax render="count uiCharts" listener="#{lineUpController.countListener}"/>
  </h:commandButton>
  <h:outputText id="count" value="#{lineUpController.count}"/>


  <h:form>
    <h:inputText value="#{artistsForm.artist1}"/>
    <h:inputText value="#{artistsForm.artist2}"/>
    <h:commandButton value="Process!">
      <f:ajax execute="@form" render="@form" listener="#{lineUpController.compareArtists}"/>
    </h:commandButton>
  </h:form>

</h:body>
</html>